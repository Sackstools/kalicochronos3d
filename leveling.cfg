# =====================================================================
# leveling.cfg - Nivelamento Avançado e Compensação Dinâmica
# =====================================================================
# Este arquivo contém as lógicas para nivelamento de gantry, compensação
# de torção, malha da mesa e compensação de ressonância.

# --- Nivelamento do Eixo Z com 3 Motores (Z-Tilt) ---
[z_tilt]
# Posições dos 3 fusos do eixo Z. Ajuste para a sua impressora.
# Formato: X,Y
z_positions:
    -50, 300  # Ponto do motor Z (traseiro esquerdo)
    300, -50  # Ponto do motor Z1 (frontal)
    650, 300  # Ponto do motor Z2 (traseiro direito)
# Pontos onde a sonda irá medir, correspondendo a cada fuso.
points:
    50, 300
    300, 50
    550, 300
speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075

# --- Compensação de Torção do Eixo (Fase 2 do Plano) ---
# Compensa a torção mecânica no eixo X que pode causar leituras
# imprecisas da sonda em diferentes posições. Essencial para gantries largos.
[axis_twist_compensation]
# A calibração é feita com o comando AXIS_TWIST_COMPENSATION_CALIBRATE.
# Após a calibração, o comando SAVE_CONFIG salvará os parâmetros aqui.


# --- Malha da Mesa (Fase 2 do Plano) ---
[bed_mesh]
speed: 400
horizontal_move_z: 5
# Malha para a mesa de 600x600mm
mesh_min: 50, 50
mesh_max: 550, 550
probe_count: 11, 11
algorithm: bicubic # Interpolação suave para melhor topografia
fade_start: 1.0
fade_end: 10.0
fade_target: 0


# --- Compensação de Ressonância (Fase 4 do Plano) ---
# Permite altas acelerações sem "ghosting" ou "ringing".
# Os valores aqui são placeholders e DEVEM ser obtidos via
# calibração com o acelerômetro (comando SHAPER_CALIBRATE).
[input_shaper]
shaper_freq_x: 55.0
shaper_type_x: mzv
shaper_freq_y: 42.0
shaper_type_y: 2hump_ei
