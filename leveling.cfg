# =====================================================================
# leveling.cfg - Nivelamento Avançado e Compensação Dinâmica
# =====================================================================
# Este arquivo contém as lógicas para nivelamento de gantry, compensação
# de torção, malha da mesa e compensação de ressonância.

# --- Nivelamento do Gantry com 4 Motores (Fase 2 do Plano) ---
[quad_gantry_level]
# Define os cantos do gantry. Ajuste para a sua impressora.
# Formato:
#   corner_xy: x,y
gantry_corners:
   -60,-10
   410,420
# Pontos onde a sonda irá medir. Devem estar sobre áreas estáveis da mesa.
points:
   50,25
   50,275
   300,275
   300,25
speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075 # Tolerância muito apertada para alta precisão
max_adjust: 10


# --- Compensação de Torção do Eixo (Fase 2 do Plano) ---
# Compensa a torção mecânica no eixo X que pode causar leituras
# imprecisas da sonda em diferentes posições. Essencial para gantries largos.
[axis_twist_compensation]
# A calibração é feita com o comando AXIS_TWIST_COMPENSATION_CALIBRATE.
# Após a calibração, o comando SAVE_CONFIG salvará os parâmetros aqui.


# --- Malha da Mesa (Fase 2 do Plano) ---
[bed_mesh]
speed: 400
horizontal_move_z: 5
# Malha de alta densidade para máxima precisão na primeira camada.
mesh_min: 15, 15
mesh_max: 335, 335
probe_count: 11, 11
algorithm: bicubic # Interpolação suave para melhor topografia
fade_start: 1.0
fade_end: 10.0
fade_target: 0


# --- Compensação de Ressonância (Fase 4 do Plano) ---
# Permite altas acelerações sem "ghosting" ou "ringing".
# Os valores aqui são placeholders e DEVEM ser obtidos via
# calibração com o acelerômetro (comando SHAPER_CALIBRATE).
[input_shaper]
shaper_freq_x: 55.0
shaper_type_x: mzv
shaper_freq_y: 42.0
shaper_type_y: 2hump_ei
